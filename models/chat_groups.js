var mongoose = require('mongoose'),
        Schema = mongoose.Schema;


   var defaultGroupPic = "data:image/png;base64,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";
               
// create a schema for groups
var GroupsSchema = new Schema({
  name: {type: String, required: true, unique: true}, //for private chat name would be senderUsername_receiverUsername
  owner: {type: String}, //email of the creater
  members: {type: [{type: mongoose.Schema.Types.ObjectId, ref: 'User'}], "default": []}, //add remove members //username//actually id
  status: {type: Boolean, default: true}, //either its active or deleted,
  type: {type: String, default: "group", enum: ['group', 'private']},
    //private(direct-user to user)//group
  photo:  {type: String, default: defaultGroupPic}
}, {
  timestamps: true
});

// create a model from the groups schema
var ChatGroups = mongoose.model('ChatGroups', GroupsSchema);


module.exports = ChatGroups;

  