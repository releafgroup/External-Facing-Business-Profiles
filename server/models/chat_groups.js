var mongoose = require('mongoose'),
        Schema = mongoose.Schema;


        var defaultGroupPic =  "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";
      
// create a schema for groups
var GroupsSchema = new Schema({
  name: {type: String, required: true, unique: true}, //for private chat name would be senderUsername_receiverUsername
  owner: {type: String}, //email of the creater
  members: {type: [{type: mongoose.Schema.Types.ObjectId, ref: 'User'}], "default": []}, //add remove members //username//actually id
  status: {type: Boolean, default: true}, //either its active or deleted,
  type: {type: String, default: "group", enum: ['group', 'private']},
    //private(direct-user to user)//group
  photo: { data: {type: Buffer, default: defaultGroupPic}, name:String}
}, {
  timestamps: true
});

// create a model from the groups schema
var ChatGroups = mongoose.model('ChatGroups', GroupsSchema);


module.exports = ChatGroups;

  